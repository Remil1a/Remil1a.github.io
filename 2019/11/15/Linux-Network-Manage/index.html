<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Linux," />










<meta name="description" content="基础网络概念我们自己搭建的环境一般是在虚拟机里搭建，现在也有很多环境都是使用虚拟机的。所以本文主要以虚拟机（VMware Workstation）的环境为主，会包含一些虚拟网络的知识。如果是真实服务器使用物理网卡相对会比较简单。不过命令都是相同的。接下来介绍一下基础网络概念。因为管理Linux一般是用Xshell，SecureCRT等终端软件连接进行操作，所以网络如果不通的话基本什么也做不了。还是">
<meta name="keywords" content="Linux">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux-Network-Manage">
<meta property="og:url" content="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/index.html">
<meta property="og:site_name" content="Take Your Heart">
<meta property="og:description" content="基础网络概念我们自己搭建的环境一般是在虚拟机里搭建，现在也有很多环境都是使用虚拟机的。所以本文主要以虚拟机（VMware Workstation）的环境为主，会包含一些虚拟网络的知识。如果是真实服务器使用物理网卡相对会比较简单。不过命令都是相同的。接下来介绍一下基础网络概念。因为管理Linux一般是用Xshell，SecureCRT等终端软件连接进行操作，所以网络如果不通的话基本什么也做不了。还是">
<meta property="og:locale" content="zh-Hans">
<meta property="og:image" content="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/1.png">
<meta property="og:image" content="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/2.png">
<meta property="og:image" content="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/3.png">
<meta property="og:image" content="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/4.png">
<meta property="og:updated_time" content="2020-07-01T01:30:42.566Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Linux-Network-Manage">
<meta name="twitter:description" content="基础网络概念我们自己搭建的环境一般是在虚拟机里搭建，现在也有很多环境都是使用虚拟机的。所以本文主要以虚拟机（VMware Workstation）的环境为主，会包含一些虚拟网络的知识。如果是真实服务器使用物理网卡相对会比较简单。不过命令都是相同的。接下来介绍一下基础网络概念。因为管理Linux一般是用Xshell，SecureCRT等终端软件连接进行操作，所以网络如果不通的话基本什么也做不了。还是">
<meta name="twitter:image" content="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/1.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: "",
      labels: ""
    }
  };
</script>



  <link rel="canonical" href="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/"/>





  <title>Linux-Network-Manage | Take Your Heart</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Take Your Heart</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-linux">
          <a href="/tags/Linux" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Linux
          </a>
        </li>
      
        
        <li class="menu-item menu-item-cisco">
          <a href="/tags/Cisco" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Cisco
          </a>
        </li>
      
        
        <li class="menu-item menu-item-huawei">
          <a href="/tags/Huawei" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Huawei
          </a>
        </li>
      
        
        <li class="menu-item menu-item-h3c">
          <a href="/tags/H3C" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            H3C
          </a>
        </li>
      
        
        <li class="menu-item menu-item-python">
          <a href="/tags/Python" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Python
          </a>
        </li>
      
        
        <li class="menu-item menu-item-docker">
          <a href="/tags/Docker" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Docker
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="搜索..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://remil1a.github.io/2019/11/15/Linux-Network-Manage/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Remilia">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/uploads/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Take Your Heart">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Linux-Network-Manage</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-11-15T10:54:15+08:00">
                2019-11-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index">
                    <span itemprop="name">Linux</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="基础网络概念"><a href="#基础网络概念" class="headerlink" title="基础网络概念"></a>基础网络概念</h1><p>我们自己搭建的环境一般是在虚拟机里搭建，现在也有很多环境都是使用虚拟机的。所以本文主要以虚拟机（VMware Workstation）的环境为主，会包含一些虚拟网络的知识。如果是真实服务器使用物理网卡相对会比较简单。不过命令都是相同的。接下来介绍一下基础网络概念。因为管理Linux一般是用Xshell，SecureCRT等终端软件连接进行操作，所以网络如果不通的话基本什么也做不了。还是很关键的。</p>
<a id="more"></a>
<h2 id="虚拟网卡"><a href="#虚拟网卡" class="headerlink" title="虚拟网卡"></a>虚拟网卡</h2><p>在使用VMware Workstation安装虚拟机时会让我们选择虚拟网卡。虚拟网卡有三种模式。<strong>NAT</strong>，<strong>仅主机</strong>和<strong>桥接</strong>。这三种模式各有不同的使用场景和工作方式，下面简单介绍一下</p>
<ul>
<li><p>NAT</p>
<p>这个顾名思义，会借用主机的IP地址和外部通信，与物理机共享IP地址。但是由于做了NAT，外部主机无法访问虚拟机。虚拟机可以访问外部设备。</p>
</li>
<li><p>仅主机</p>
<p>做实验的话，这个模式用的最多，也是需要重点讲的。仅主机模式相当于在你的电脑上创建了一个虚拟交换机，这个虚拟交换机一般叫VMnet x x为数字。可以在虚拟网络编辑器里自行创建，VMWare Workstation自带了一张仅主机的虚拟网卡。默认情况下，仅主机模式的网卡只能和物理机以及同虚拟交换机的虚拟机通信。且他们的IP地址要在同一网段才能通信，后面会用实际例子来说明。</p>
</li>
<li><p>桥接</p>
<p>这个往往是外部主机和虚拟机需要互通的时候会用到的模式，在这种模式下，如果桥接模式桥接物理网卡，则虚拟机可以和外部主机通信。在生产环境会用的比较多。</p>
</li>
</ul>
<h2 id="Linux网卡命名"><a href="#Linux网卡命名" class="headerlink" title="Linux网卡命名"></a>Linux网卡命名</h2><p>一般来说，在VMWare Workstation中，你的虚拟机加了几块网卡，在命令行中使用ip a命令就可以看到几块网卡。</p>
<p><img src="/2019/11/15/Linux-Network-Manage/1.png" alt="1"></p>
<p>上面是我刚装好的Linux，有一个仅主机模式的网卡，有一个lo0。lo0是本地环回网卡，跟平时做路由器实验的lo0一样，逻辑上的接口。自己访问自己的时候就是用的这块网卡。不用管他。</p>
<p>可以看到第二块网卡叫eno16777736。虽然不是很重要但是还是说明一下这种奇怪的命名方式。先摘抄一段话</p>
<blockquote>
<p>Network interface names<br>Traditionally, network interfaces in Linux are enumerated as eth0, eth1, eth2, and so on. However, the mechanism which sets these names can cause changes to which interface gets which name as devices are added and removed.<br>The default naming behavior in Red Hat Enterprise Linux 7 is to assign fixed names based on firmware, device topology, and device type. </p>
<p>Interface names have the following characters:<br>​    Ethernet interfaces begin with en, WLAN interfaces begin with wl, and WWAN<br>​    interfaces begin with ww.<br>​    The next character(s) represents the type of adapter with an o for on-board, s for<br>​    hotplug slot, and p for PCI geographic location.<br>​    Not used by default but also available to administrators, an x is used to incorporate a<br>​    MAC address.<br>​    Finally, a number N is used to represent an index, ID, or port.<br>​    If the fixed name cannot be determined, the traditional names such as ethN will be<br>​    used. </p>
<p>For example, the first embedded network interface may be named eno1 and a PCI card network interface may be named enp2s0.<br>The new names make it easier to distinguish the relationship between a port and its name if the user knows both, but the trade off is that users cannot assume a system with one interface calls that interface eth0. </p>
</blockquote>
<p>简单来说就是</p>
<p>LAN用 en<br>WLAN用 wl<br>集成网卡：o<br>独立网卡：s<br>独立的不是热插拔的pci:p</p>
<p>wwan用的是mini PCI-E口，现在新的笔记本电脑上，这个口也可以接mSATA口的固态硬盘，但要主板支持，如thinkpad x220。不是所有的wwan口都支持mSATA。</p>
<p>在CentOS7中，有别于传统的eth0，eth1这样命名。7中采用了更科学的命名方式（也更长了）。掌握规律的话，还是很好理解的。</p>
<h3 id="为什么需要这么复杂的命名方式？"><a href="#为什么需要这么复杂的命名方式？" class="headerlink" title="为什么需要这么复杂的命名方式？"></a>为什么需要这么复杂的命名方式？</h3><p>服务器通常有多块网卡，有板载集成的，同时也有插在PCIe插槽的。<br>Linux系统的命名原来是eth0,eth1这样的形式，但是这个编号往往不一定准确对应网卡接口的物理顺序。<br>为解决这类问题，dell开发了biosdevname方案。<br>systemd v197版本中将dell的方案作了进一步的一般化拓展。<br>目前的Centos既支持dell的biosdevname，也支持systemd的方案。</p>
<p><img src="/2019/11/15/Linux-Network-Manage/2.png" alt="1"></p>
<p>可以看一下这张图，有板载网卡和PCI网卡的情况下，很难说清楚哪个是eth0</p>
<p>在CentOS7中，命名顺序如下：</p>
<ol>
<li>如果从BIOS中能够取到可用的，板载网卡的索引号，则使用这个索引号命名，例如:eno1，如不能则尝试2</li>
<li>如果从BIOS中能够取到可以用的，网卡所在的PCI-E热插拔插槽的索引号，则使用这个索引号命名，例如:ens1，如不能则尝试3</li>
<li>如果能拿到设备所连接的物理位置信息，则使用这个信息命名，例如:enp2s0，如不能则尝试4</li>
<li>传统的kernel命名方法，例如:eth0，这种命名方法的结果不可预知的，即可能第二块网卡对应eth0，第一块网卡对应eth1。</li>
<li>使用网卡的MAC地址来命名，这个方法一般不使用。</li>
</ol>
<p>biosdevname和net.ifnames两种命名规范<br>net.ifnames的命名规范为:   设备类型+设备位置+数字<br>设备类型：<br>​    en 表示Ethernet<br>​    wl 表示WLAN<br>​    ww 表示无线广域网WWAN</p>
<p>设备位置如下：</p>
<p><img src="/2019/11/15/Linux-Network-Manage/3.png" alt="1"></p>
<p>实际的例子:<br>​    eno1 板载网卡<br>​    enp0s2 pci网卡<br>​    ens33  pci网卡<br>​    wlp3s0 PCI无线网卡<br>​    wwp0s29f7u2i2   4Gmodem<br>​    wlp0s2f1u4u1  连接在USB Hub上的无线网卡<br>​    enx78e7d1ea46da pci网卡</p>
<p>而biosdevname的命名规范为</p>
<p><img src="/2019/11/15/Linux-Network-Manage/4.png" alt="1"></p>
<p>实际的例子:<br>​    em1 板载网卡<br>​    p3p4 pci网卡<br>​    p3p4_1 虚拟网卡</p>
<p>那么我们的网卡到底是经过怎样的顺序才会是这么个名字呢。</p>
<p>来看看systemd中的实际执行顺序：<br>按照如下顺序执行udev的rule<br>1./usr/lib/udev/rules.d/60-net.rules<br>2./usr/lib/udev/rules.d/71-biosdevname.rules<br>3./lib/udev/rules.d/75-net-description.rules<br>4./usr/lib/udev/rules.d/80-net-name-slot.rules<br>60-net.rules<br>​    使用/lib/udev/rename_device这个程序，去查询/etc/sysconfig/network-scripts/下所有以ifcfg-开头的文件<br>​    如果在ifcfg-xx中匹配到HWADDR=xx:xx:xx:xx:xx:xx参数的网卡接口<br>​    则选取DEVICE=yyyy中设置的名字作为网卡名称。<br>71-biosdevname.rules<br>​    如果系统中安装了biosdevname，且内核参数未指定biosdevname=0，且上一步没有重命名网卡，则按照biosdevname的命名规范，从BIOS中取相关信息来命名网卡。<br>​    主要是取SMBIOS中的type 9 (System Slot) 和 type 41 (Onboard DevicesExtended Information)<br>​    不过要求SMBIOS的版本要高于2.6，且系统中要安装biosdevname程序。<br>75-net-description.rules<br>​    udev通过检查网卡信息，填写如下这些udev的属性值<br>​    ID_NET_NAME_ONBOARD<br>​    ID_NET_NAME_SLOT<br>​    ID_NET_NAME_PATH<br>​    ID_NET_NAME_MAC<br>80-net-name-slot.rules<br>​    如果在60-net.rules，71-biosdevname.rules这两条规则中没有重命名网卡，且内核未指定net.ifnames=0参数则udev依次尝试使用以下属性值来命名网卡，如果这些属性值都没有，则网卡不会被重命名。<br>​    ID_NET_NAME_ONBOARD<br>​    ID_NET_NAME_SLOT<br>​    ID_NET_NAME_PATH<br>上边的71-biosdevname.rules 是实际执行biosdevname的policy75-net-description.rules和80-net-name-slot.rules实际执行Scheme 1,2,3<br>根据上述的过程，可见网卡命名受 biosdevname和net.ifnames这两个内核参数影响。这两个参数都可以在grub配置中提供。<br>biosdevname=0是系统默认值（dell服务器默认是1），net.ifnames=1是系统默认值:<br>​    vi /boot/grub/grub.conf<br>​    kernel /boot/ biosdevname=1<br>​    initrd /boot/initrd.img </p>
<p>在上面Centos7中命名的策略顺序是系统默认的。<br>如系统BIOS符合要求，且系统中安装了biosdevname，且biosdevname=1启用，则biosdevname优先；<br>如果BIOS不符合biosdevname要求或biosdevname=0，则仍然是systemd的规则优先。<br>如果用户自己定义了udevrule来修改内核设备名字，则用户规则优先。</p>
<p>内核参数组合使用的时候，其结果如下：<br>​    默认内核参数(biosdevname=0，net.ifnames=1):  网卡名”enp5s2”<br>​    biosdevname=1，net.ifnames=0：网卡名 “em1”<br>​    biosdevname=0，net.ifnames=0：网卡名 “eth0” (最传统的方式,eth0 eth1傻傻分不清)</p>
<h1 id="使用Network-Manager管理Linux网络"><a href="#使用Network-Manager管理Linux网络" class="headerlink" title="使用Network Manager管理Linux网络"></a>使用Network Manager管理Linux网络</h1><p>Network Manager是Centos7推荐的网络管理命令。相比于使用配置文件来管理网络，Network Manager（以后简称NM）更灵活方便。</p>
<p>在Centos7中，即使是最小化安装，也能够使用NM命令来管理网络，所以我们不需要安装任何组件就可以使用下面提到的所有命令。</p>
<p>但是首先要知道两个概念</p>
<ul>
<li><p>con</p>
<p>连接，逻辑设置。指的是一套具体配置方案</p>
</li>
<li><p>device</p>
<p>  设备，物理设备。例如ens33,virbr0,team0</p>
</li>
</ul>
<p>其中多个connection可以应用到同一个device，但同一时间只能启用其中一个connection。<br>这样的好处是针对一个网络接口，可以设置多个网络连接，比如静态IP和动态IP，再根据需要up相应的connection。</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Linux/" rel="tag"># Linux</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/05/24/Device-Management-For-AAA/" rel="next" title="Device Management For AAA">
                <i class="fa fa-chevron-left"></i> Device Management For AAA
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/05/20/Learn-the-Rudiments-of-Docker/" rel="prev" title="Learn-the-Rudiments-of-Docker">
                Learn-the-Rudiments-of-Docker <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  
 <div id="gitalk-container"></div>
  


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/uploads/avatar.png"
                alt="Remilia" />
            
              <p class="site-author-name" itemprop="name">Remilia</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">18</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                
                  <span class="site-state-item-count">4</span>
                  <span class="site-state-item-name">分类</span>
                
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/tags/index.html">
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#基础网络概念"><span class="nav-number">1.</span> <span class="nav-text">基础网络概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#虚拟网卡"><span class="nav-number">1.1.</span> <span class="nav-text">虚拟网卡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux网卡命名"><span class="nav-number">1.2.</span> <span class="nav-text">Linux网卡命名</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#为什么需要这么复杂的命名方式？"><span class="nav-number">1.2.1.</span> <span class="nav-text">为什么需要这么复杂的命名方式？</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#使用Network-Manager管理Linux网络"><span class="nav-number">2.</span> <span class="nav-text">使用Network Manager管理Linux网络</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Remilia</span>

  
</div>


<!--  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Pisces</a> v5.1.4</div>
-->




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">

  <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
   <script type="text/javascript">
        var gitalk = new Gitalk({
          clientID: '0bdc0d6f49bfb51e5834',
          clientSecret: '9306599f43db3af1e58268b660f8fb11fe4771ec',
          repo: 'git-comments',
          owner: 'remil1a',
          admin: ['remil1a'], 
          id: window.location.pathname,
          distractionFreeMode: 'true'
        })
        gitalk.render('gitalk-container')           
       </script>

  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  
  
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });
    </script>

    <script type="text/x-mathjax-config">
      MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML""></script>
  


  

  

</body>
</html>
